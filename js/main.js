!function(){"use strict";console.log("     \nThis blog is using hexo-theme-kaze based on MIT license\nSee theme at https://github.com/theme-kaze/hexo-theme-kaze\n");const e=document.body.scrollWidth||document.documentElement.scrollWidth;let t=null;function n(e){const t=e.target,o=document.getElementById("mobiletoc");o&&t&&!o.contains(t)&&(o.style.display="none",window.mask.remove(),document.removeEventListener("click",n))}window.searchControlButton=null,e<=742?(t=document.getElementsByClassName("darkwidget")[0],window.searchControlButton=document.getElementsByClassName("searchwidget")[0]):(t=document.getElementsByClassName("darknavbar")[0],window.searchControlButton=document.getElementsByClassName("searchnavbar")[0]),t.addEventListener("click",(()=>{window.setDarkmode(window.reverseDarkModeSetting())}));const o=()=>{const e=document.getElementById("mobiletoc");if(!e)return;e.style.display="block";const t=document.createElement("div");t.id="mask",document.body.append(t),setTimeout((()=>{document.addEventListener("click",n)}),0)};setTimeout((()=>{const e=document.getElementById("menubutton");e&&(e.onclick=o)}),0);const l=()=>{const e=document.getElementById("scrollbutton"),t=document.getElementById("menubutton"),n=document.getElementById("popbutton"),o=document.body.scrollWidth||document.documentElement.scrollWidth;"1"===e.style.opacity?(e.style.bottom="32px",e.style.opacity="0",n.style.transform="none"):(n.style.transform="rotate(90deg)",e.style.bottom="85px",e.style.opacity="1");const l=document.getElementById("mobiletoc");o<=862&&l&&("1"===t.style.opacity?(t.style.right="32px",t.style.opacity="0"):(t.style.right="85px",t.style.opacity="1"));const s=document.querySelector(".darkwidget"),c=document.querySelector(".searchwidget");o<=742&&("1"===s.style.opacity?(s.style.bottom="32px",s.style.opacity="0",s.style.transform="none"):(s.style.display="flex",n.style.transform="rotate(90deg)",s.style.bottom="138px",s.style.opacity="1"),"1"===c.style.opacity?(c.style.bottom="32px",c.style.opacity="0",c.style.transform="none"):(c.style.display="flex",c.style.transform="rotate(90deg)",c.style.bottom="191px",c.style.opacity="1"))};setTimeout((()=>{document.getElementById("popbutton").addEventListener("click",l)}),0);const s=()=>{let e=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop;e>1?(window.requestAnimationFrame(s),scrollTo(0,Math.floor(.85*e))):scrollTo(0,0)};function c(e){return e.replace(/[<>&"]/g,(e=>({"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"}[e])))}function a(e){const t=document.querySelector("#local-search");if(!t.contains(e.target)){const e=document.querySelector("#search-input"),n=document.querySelector("#search-content");e.value="",t.style.display="none",n.innerHTML="",window.mask.remove(),document.removeEventListener("click",a)}}setTimeout((()=>{const e=document.getElementById("scrollbutton");e&&(e.onclick=s)}),0),setTimeout((()=>{window.searchControlButton&&window.searchControlButton.addEventListener("click",(()=>{const e=document.createElement("div");e.id="mask",document.body.append(e);document.querySelector("#local-search").style.display="block",setTimeout((()=>{document.addEventListener("click",a)}),0)}))})),window.localSearch=function(e){fetch(e).then((e=>e.json())).then((e=>{let t=document.getElementById("search-input"),n=document.getElementById("search-content");t.addEventListener("input",(function(){let t='<ul class="search-result-list">',o=c(this.value.trim().toLowerCase());if(n.innerHTML="",!(this.value.trim().length<=0)){if(e.forEach((function(e){let n=!0;e.title&&""!==e.title.trim()||(e.title="Untitled");let l=e.title.trim().toLowerCase();const s=e.content.trim().replace(/<[^>]+>/g,"").toLowerCase();let c=-1;const a=l.indexOf(o);let i=0;if(""!==s&&(i=s.indexOf(o),c=i),a<0&&i<0&&(n=!1),i<0&&(c=0),n){t+=`<li><a href="${e.url}" class="search-result-title" >'${l}</a>`;const n=e.content;if(c>=0){const e=Math.max(0,c-12),l=Math.min(n.length,c+12);let s=n.substr(e,l);s=s.replace(new RegExp(o,"gi"),'<em class="search-keyword">'+o+"</em>"),t+='<p class="search-result">'+s+"...</p>"}t+="</li>"}})),t+="</ul>",-1===t.indexOf("<li>"))return n.innerHTML='<ul><span class="local-search-empty">没有搜索到结果<span></ul>';n.innerHTML=t}}))}))},window.localSearch2=function(){var e=document.querySelector('meta[property="algolia:search"]').dataset;const t=algoliasearch(e.applicationId,e.apiKey).initIndex(e.indexName);let n=document.getElementById("search-input"),o=document.getElementById("search-content");n.addEventListener("input",(function(){let e='<ul class="search-result-list">',n=c(this.value.trim().toLowerCase());o.innerHTML="",this.value.trim().length<=0||t.search(n,{hitsPerPage:10}).then((t=>{if(t.hits.forEach((function(t){let o=t.contentStrip,l=t.title,s=-1;l.indexOf(n);let c=0;if(""!==o&&(c=o.indexOf(n),s=c),c<0&&(s=0),e+=`<li><a href="${t.url}" class="search-result-title" >'${l}</a>`,s>=0){const t=Math.max(0,s-12),l=Math.min(o.length,s+12);let c=o.substr(t,l);c=c.replace(new RegExp(n,"gi"),'<em class="search-keyword">'+n+"</em>"),e+='<p class="search-result">'+c+"...</p>"}e+="</li>"})),e+="</ul>",-1===e.indexOf("<li>"))return o.innerHTML='<ul><span class="local-search-empty">没有搜索到结果<span></ul>';o.innerHTML=e}))}))}}();
